(function(t){function e(e){for(var n,o,s=e[0],c=e[1],l=e[2],d=0,v=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&v.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(v.length)v.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,s=1;s<a.length;s++){var c=a[s];0!==r[c]&&(n=!1)}n&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},r={app:0},i=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"2fef":function(t,e,a){"use strict";a("90c1")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=(a("d3b7"),a("bc3a")),i=a.n(r),o={baseURL:""},s=i.a.create(o);s.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),s.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)})),Plugin.install=function(t){t.axios=s,window.axios=s,Object.defineProperties(t.prototype,{axios:{get:function(){return s}},$axios:{get:function(){return s}}})},n["a"].use(Plugin);Plugin;var c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-app-bar",{attrs:{app:""}},[a("v-toolbar-title",[t._v("EnterNEU")])],1),a("v-main",[a("router-view")],1)],1)},l=[],u={name:"App",data:function(){return{}}},d=u,v=a("2877"),f=a("6544"),p=a.n(f),m=a("7496"),h=a("40dc"),x=a("f6c4"),_=a("2a7f"),g=Object(v["a"])(d,c,l,!1,null,null,null),b=g.exports;p()(g,{VApp:m["a"],VAppBar:h["a"],VMain:x["a"],VToolbarTitle:_["a"]});var w=a("8c4f"),y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dir",[a("v-container",[a("v-alert",{staticClass:"mt-5",attrs:{text:"",type:"info"}},[a("v-row",{attrs:{align:"center"}},[a("v-col",{staticClass:"grow",domProps:{innerHTML:t._s(t.announcement)}})],1)],1),a("v-form",{ref:"form",attrs:{"lazy-validation":""}},[a("v-text-field",{attrs:{label:"姓名(例如：孙*川)",outlined:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),a("v-text-field",{attrs:{label:"学号",outlined:""},model:{value:t.stuID,callback:function(e){t.stuID=e},expression:"stuID"}}),a("v-text-field",{attrs:{label:"入口名(格式:xx校区xx门)",outlined:""},model:{value:t.entranceName,callback:function(e){t.entranceName=e},expression:"entranceName"}}),a("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[a("v-select",{staticClass:"mx-2",attrs:{items:t.TextItems,"item-text":"configValue","item-value":"configName",label:"提示文本",outlined:""},model:{value:t.TextSelect,callback:function(e){t.TextSelect=e},expression:"TextSelect"}}),a("v-select",{staticClass:"mx-2",attrs:{items:t.VehicleItems,"item-text":"configValue","item-value":"configName",label:"方向",outlined:""},model:{value:t.VehicleSelect,callback:function(e){t.VehicleSelect=e},expression:"VehicleSelect"}}),a("v-select",{staticClass:"mx-2",attrs:{items:t.ExpTimeItems,"item-text":"configValue","item-value":"configName",label:"过期时间",outlined:""},model:{value:t.ExpTimeSelect,callback:function(e){t.ExpTimeSelect=e},expression:"ExpTimeSelect"}})],1),a("v-btn",{staticClass:"mb-4",attrs:{block:"",depressed:"",color:"primary",large:""},on:{click:function(e){return t.submit()}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit.apply(null,arguments)}}},[t._v(" 生成 ")])],1),a("div",{staticClass:"text-caption text-center"},[t._v("您此次会话的秘钥 "),a("br"),a("code",[t._v(t._s(t.key))])])],1),a("v-dialog",{attrs:{"max-width":"450px"},model:{value:t.config.alert,callback:function(e){t.$set(t.config,"alert",e)},expression:"config.alert"}},[a("v-card",[a("v-card-title",[t._v(t._s(t.config.alert_type))]),a("v-card-text",[t._v(" "+t._s(t.config.alert_text)+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.config.alert=!t.config.alert}}},[t._v("OK")])],1)],1)],1),a("Tips",{attrs:{show:t.showTips},on:{close:function(e){t.showTips=!1}}})],1)},k=[],V=(a("b0c0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dir",[a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:t.showTips,callback:function(e){t.showTips=e},expression:"showTips"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){return t.close()}}},[a("v-icon",[t._v("mdi-close")])],1),a("v-toolbar-title",[t._v("说明文档")])],1),a("v-divider"),a("v-card-text",{staticClass:"mt-5"},[t.loading?a("v-progress-linear",{attrs:{indeterminate:"",color:"primary"}}):t._e(),a("div",{domProps:{innerHTML:t._s(t.markdownToHtml)}})],1)],1)],1)],1)],1)}),T=[],C=a("7c5c"),D={name:"tips",props:["show"],data:function(){return{showTips:!1,markdown:"### 获取中。。。",loading:!0}},methods:{close:function(){this.showTips=!1},getMD:function(){var t=this;this.axios({url:"/api/tips",method:"get"}).then((function(e){0==e.data.status?t.markdown=e.data.data:t.error(e.data.msg),t.loading=!1})).catch((function(e){t.error(e)}))},error:function(t){this.loading=!1,this.markdown="# 读取失败("+t+")"}},computed:{markdownToHtml:function(){return C["marked"].parse(this.markdown)}},watch:{show:function(){this.showTips=this.show},showTips:function(t){0==t?this.$emit("close"):this.getMD()}}},S=D,I=a("8336"),O=a("b0af"),j=a("99d9"),E=a("169a"),P=a("ce7e"),U=a("132d"),$=a("8e36"),N=a("0fd9"),M=a("71d9"),B=Object(v["a"])(S,V,T,!1,null,null,null),A=B.exports;p()(B,{VBtn:I["a"],VCard:O["a"],VCardText:j["b"],VDialog:E["a"],VDivider:P["a"],VIcon:U["a"],VProgressLinear:$["a"],VRow:N["a"],VToolbar:M["a"],VToolbarTitle:_["a"]});var R={name:"index",components:{Tips:A},data:function(){return{name:"",stuID:"",entranceName:"",key:"正在获取",keyMD5:"",TextSelect:"5",TextItems:[{configName:"0",configValue:"未经审核"}],VehicleSelect:"0",VehicleItems:[{configName:"0",configValue:"入"}],ExpTimeSelect:"0",ExpTimeItems:[{configName:"0",configValue:"1小时"}],config:{alert_text:"",alert_type:"info",alert:!1},dialog:!1,showTips:!1,announcement:"获取中..."}},mounted:function(){var t=this;this.axios({url:"/api/randKey",method:"get"}).then((function(e){0==e.data.status?(t.key=e.data.data.key,t.keyMD5=e.data.data.MD5):t.error(e.data.msg)})).catch((function(e){t.error(e)})),this.axios({url:"/api/config",method:"get"}).then((function(e){0==e.data.status?(t.TextItems=e.data.data.codeType,t.VehicleItems=e.data.data.actualVehicle,t.ExpTimeItems=e.data.data.expTime,t.announcement=e.data.data.announcement):t.error(e.data.msg)})).catch((function(e){t.error(e)})),console.log(this)},methods:{submit:function(){var t=this;console.log(this.ExpTimeSelect+this.ExpTimeSelect.configName),this.axios({url:"/api/store",method:"post",data:{key:this.key,keyMD5:this.keyMD5,name:this.name,stuID:this.stuID,entranceName:this.entranceName,actualVehicle:this.VehicleSelect,codeType:this.TextSelect,expTimeType:parseInt(this.ExpTimeSelect)}}).then((function(e){0==e.data.status?(t.success("创建成功"),setTimeout((function(){t.$router.push(e.data.data.vueUrl)}),1e3)):t.error(e.data.msg)})).catch((function(e){t.error(e)}))},success:function(t){this.config.alert=!this.config.alert,this.config.alert_text=t,this.config.alert_type="成功"},error:function(t){this.config.alert=!this.config.alert,this.config.alert_text=t,this.config.alert_type="错误"}}},F=R,H=a("0798"),K=a("62ad"),L=a("a523"),z=a("4bd4"),J=a("b974"),G=a("2fa4"),Q=a("8654"),q=Object(v["a"])(F,y,k,!1,null,null,null),W=q.exports;p()(q,{VAlert:H["a"],VBtn:I["a"],VCard:O["a"],VCardActions:j["a"],VCardText:j["b"],VCardTitle:j["c"],VCol:K["a"],VContainer:L["a"],VDialog:E["a"],VForm:z["a"],VRow:N["a"],VSelect:J["a"],VSpacer:G["a"],VTextField:Q["a"]});var X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dir",[a("v-container",[1==t.valid?a("v-alert",{staticClass:"mx-3 mt-2",attrs:{type:"success",transition:"scroll-y-transition"}},[a("v-row",{attrs:{align:"center"}},[a("v-col",{staticClass:"grow"},[t._v(" 您的凭证有效 ")]),a("v-col",{staticClass:"shrink"},[a("v-btn",{attrs:{text:""},on:{click:function(e){t.showTips=!0}}},[t._v("说明文档")])],1)],1)],1):t._e(),0==t.valid?a("v-alert",{staticClass:"mx-3 mt-2",attrs:{type:"info"}},[t._v("加载中。。。")]):t._e(),-1==t.valid?a("v-alert",{staticClass:"mx-3 mt-2",attrs:{type:"error",transition:"scroll-y-transition"}},[t._v("您的凭证无效或已过期")]):t._e(),-1==t.valid?a("v-row",{staticClass:"mt-4",attrs:{justify:"center"}},[a("v-btn",{staticClass:"mx-auto",attrs:{to:"/",depressed:""}},[t._v("重新生成")])],1):t._e(),1==t.valid?a("v-row",{staticClass:"d-flex my-2 mx-auto",attrs:{"max-width":"344"}},[a("v-col",[a("v-card",[a("v-card-title",[t._v("凭证信息 "),a("v-spacer"),!0===t.switch_site_data.enabled?a("v-btn",{attrs:{text:"",color:"primary"},on:{click:t.switch_site}},[a("v-icon",[t._v("mdi-swap-horizontal")])],1):t._e(),!1===t.deleteBtn?a("v-btn",{attrs:{text:"",color:"error"},on:{click:function(e){t.deleteBtn=!0}}},[a("v-icon",[t._v("mdi-delete")])],1):t._e(),!0===t.deleteBtn?a("v-btn",{attrs:{depressed:"",color:"error",to:t.deleteUrl}},[t._v(" 确定删除吗? ")]):t._e()],1),a("v-card-text",[t._v(" token："),a("code",[t._v(t._s(t.token))]),t._v("（获取信息的唯一凭证）"),a("br"),t._v(" 秘钥："),a("code",[t._v(t._s(t.key))]),t._v("（不完整将导致关键信息解密失败）"),a("br"),t._v(" 过期时间："),a("code",[t._v(t._s(t.oData.info.expTime))]),a("br"),a("br"),t._v(" e码通页面入口：（每次都应从入口进入）"),a("v-btn",{attrs:{text:"",color:"primary",small:""},on:{click:function(e){return t.doCopy(t.oData.info.checkUrl)}}},[t._v(" 复制 ")]),a("br"),a("code",[t._v(t._s(t.oData.info.checkUrl))]),a("br"),t._v(" 本页面(请保存！丢失无法找回！)："),a("v-btn",{attrs:{text:"",color:"primary",small:""},on:{click:function(e){return t.doCopy(t.oData.info.statusUrl)}}},[t._v(" 复制 ")]),a("br"),a("code",[t._v(t._s(t.oData.info.statusUrl))])],1),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"teal darken-2",href:t.oData.info.checkUrl,target:"_blank"}},[t._v(" 通行许可页面 ")]),a("v-btn",{attrs:{text:"",color:"primary",href:t.ecodeQrcodeUrl,target:"_blank"}},[t._v(" 二维码页面 ")])],1)],1)],1)],1):t._e(),1==t.valid?a("v-row",{staticClass:"d-flex my-2 mx-auto",attrs:{"max-width":"344"}},[a("v-col",[a("v-card",[a("v-card-title",[t._v("Shadowrocket配置(iOS)")]),a("v-card-text",[a("p",[t._v(" 使用Shadowrocket软件的Url改写功能可实现“使用微信/智慧东大扫码，强行跳转至本站的页面” ")]),a("p",[t._v(" 具体教程可查看->"),a("v-btn",{attrs:{text:"",color:"primary",small:""},on:{click:function(e){t.showTips=!0}}},[t._v(" 说明文档 ")])],1)]),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.doCopy(t.shadowrocketUrl)}}},[t._v(" 复制配置链接 ")])],1)],1)],1),a("v-col",[a("v-card",[a("v-card-title",[t._v("上传头像")]),a("v-card-text",[a("div",{staticClass:"text--primary"},[t._v(" 您的头像数据将经AES加密处理后存储于服务器上，便于您使用。"),a("br"),t._v(" 放心，您的数据会按照您的设定进行定时删除。 ")]),a("p",[t._v("允许格式：JPG、PNG（大小不超过1MB）")]),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"teal accent-4",disabled:null==t.oData||1==t.oData.ImgUploaded},on:{click:function(e){t.reveal=!0}}},[t._v(" "+t._s(null!=t.oData&&1==t.oData.ImgUploaded?"已上传":"上传")+" ")])],1)],1),a("v-expand-transition",[t.reveal?a("v-card",{staticClass:"transition-fast-in-fast-out v-card--reveal",staticStyle:{height:"100%"}},[a("v-card-title",[t._v("上传")]),a("v-card-text",{staticClass:"pb-0"},[a("v-file-input",{attrs:{placeholder:"选择文件","prepend-icon":"mdi-image",label:"选择文件",small:""},model:{value:t.upload.file,callback:function(e){t.$set(t.upload,"file",e)},expression:"upload.file"}}),a("v-card-actions",{staticClass:"pt-2"},[a("v-btn",{attrs:{text:"",color:"primary",loading:t.upload.loading},on:{click:t.uploadImg}},[t._v(" 上传 ")]),a("v-btn",{attrs:{text:""},on:{click:function(e){t.reveal=!1}}},[t._v(" 取消 ")])],1)],1)],1):t._e()],1)],1)],1)],1):t._e(),a("v-dialog",{attrs:{"max-width":"450px"},model:{value:t.config.alert,callback:function(e){t.$set(t.config,"alert",e)},expression:"config.alert"}},[a("v-card",[a("v-card-title",[t._v(t._s(t.config.alert_type))]),a("v-card-text",[t._v(" "+t._s(t.config.alert_text)+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.config.alert=!t.config.alert}}},[t._v("OK")])],1)],1)],1),a("Tips",{attrs:{show:t.showTips},on:{close:function(e){t.showTips=!1}}})],1)],1)},Y=[],Z={name:"status",components:{Tips:A},data:function(){return{token:"",valid:0,key:"",oData:{},reveal:!1,config:{alert_text:"",alert_type:"info",alert:!1},upload:{loading:!1,file:null},showTips:!1,deleteBtn:!1,switch_site_data:{enabled:!1,url:""}}},mounted:function(){this.token=this.$route.params.token,this.key=this.$route.params.key,this.init(),this.deleteBtn=!1},methods:{init:function(){var t=this;this.axios({url:"/api/"+this.token+"/"+this.key+"/status",method:"get"}).then((function(e){0==e.data.status?(t.valid=1,t.oData=e.data.data,t.switch_site_data.enabled=e.data.data.switch.enabled,t.switch_site_data.url=e.data.data.switch.url):(t.valid=-1,t.error(e.data.msg))})).catch((function(e){t.error(e)}))},switch_site:function(){window.location=this.switch_site_data.url+"/#"+this.$route.fullPath},uploadImg:function(){var t=this,e=new FormData;e.append("file",this.upload.file),this.upload.loading=!0,this.axios({method:"post",url:"/api/upload?token="+this.token+"&key="+this.key,headers:{"Content-type":"multipart/form-data;charset:utf-8"},data:e}).then((function(e){0==e.data.status?(t.success("上传成功"),t.init()):t.error(e.data.msg),t.upload.loading=!1,t.reveal=!1})).catch((function(e){t.error(e)}))},doCopy:function(t){var e=this;this.$copyText(t).then((function(){e.success("拷贝成功")}),(function(t){e.error("拷贝成功"+t)}))},success:function(t){this.config.alert=!this.config.alert,this.config.alert_text=t,this.config.alert_type="成功"},error:function(t){this.config.alert=!this.config.alert,this.config.alert_text=t,this.config.alert_type="错误"}},computed:{deleteUrl:function(){return"/delete/"+this.token+"/"+this.key},shadowrocketUrl:function(){return this.oData.info.checkUrl+"/shadowrocket"},ecodeQrcodeUrl:function(){return this.oData.info.checkUrl+"?_=1"}}},tt=Z,et=(a("2fef"),a("0789")),at=a("23a7"),nt=Object(v["a"])(tt,X,Y,!1,null,null,null),rt=nt.exports;p()(nt,{VAlert:H["a"],VBtn:I["a"],VCard:O["a"],VCardActions:j["a"],VCardText:j["b"],VCardTitle:j["c"],VCol:K["a"],VContainer:L["a"],VDialog:E["a"],VExpandTransition:et["a"],VFileInput:at["a"],VIcon:U["a"],VRow:N["a"],VSpacer:G["a"]});var it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-container",{directives:[{name:"show",rawName:"v-show",value:0==t.view,expression:"view == 0"}]},[a("div",{staticClass:"mt-6 mb-2 d-flex justify-center"},[a("v-progress-circular",{attrs:{size:50,color:"primary",indeterminate:""}})],1),a("div",{staticClass:"text-h5 text-center mb-3"},[t._v("加载中")])]),a("v-container",{directives:[{name:"show",rawName:"v-show",value:1==t.view,expression:"view == 1"}]},[a("div",{staticClass:"mt-6 mb-2"},[a("div",{staticClass:"text-h5 text-center mb-3"},[a("v-icon",[t._v("mdi-check-circle")]),t._v("删除成功 ")],1)]),a("v-row",{staticClass:"mt-4",attrs:{justify:"center"}},[a("v-btn",{staticClass:"mx-auto",attrs:{to:"/",depressed:""}},[t._v("重新生成")])],1)],1),a("v-container",{directives:[{name:"show",rawName:"v-show",value:-1==t.view,expression:"view == -1"}]},[a("div",{staticClass:"mt-6 mb-2"},[a("div",{staticClass:"text-h5 text-center mb-3"},[a("v-icon",[t._v("mdi-alert-circle")]),t._v("删除失败 ")],1)]),a("v-row",{staticClass:"mt-4",attrs:{justify:"center"}},[a("v-btn",{staticClass:"mx-auto",attrs:{to:"/",depressed:""}},[t._v("重新生成")])],1)],1),a("v-dialog",{attrs:{"max-width":"450px"},model:{value:t.config.alert,callback:function(e){t.$set(t.config,"alert",e)},expression:"config.alert"}},[a("v-card",[a("v-card-title",[t._v(t._s(t.config.alert_type))]),a("v-card-text",[t._v(" "+t._s(t.config.alert_text)+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.config.alert=!t.config.alert}}},[t._v("OK")])],1)],1)],1)],1)},ot=[],st={name:"delete",data:function(){return{view:0,config:{alert_text:"",alert_type:"info",alert:!1}}},mounted:function(){var t=this;this.axios({url:"/api/"+this.$route.params.token+"/"+this.$route.params.key+"/delete",method:"post"}).then((function(e){0==e.data.status?t.view=1:(t.view=-1,t.error(e.data.msg))})).catch((function(e){t.error(e)}))},methods:{success:function(t){this.config.alert=!this.config.alert,this.config.alert_text=t,this.config.alert_type="成功"},error:function(t){this.config.alert=!this.config.alert,this.config.alert_text=t,this.config.alert_type="错误"}}},ct=st,lt=a("490a"),ut=Object(v["a"])(ct,it,ot,!1,null,null,null),dt=ut.exports;p()(ut,{VBtn:I["a"],VCard:O["a"],VCardActions:j["a"],VCardText:j["b"],VCardTitle:j["c"],VContainer:L["a"],VDialog:E["a"],VIcon:U["a"],VProgressCircular:lt["a"],VRow:N["a"],VSpacer:G["a"]}),n["a"].use(w["a"]);var vt=[{path:"/",name:"index",component:W},{path:"/status/:token/:key",name:"status",component:rt},{path:"/delete/:token/:key",name:"delete",component:dt}],ft=new w["a"]({base:"/",routes:vt}),pt=ft,mt=a("f309");n["a"].use(mt["a"]);var ht=new mt["a"]({}),xt=a("4eb5"),_t=a.n(xt);n["a"].use(_t.a),n["a"].config.productionTip=!1,new n["a"]({router:pt,vuetify:ht,render:function(t){return t(b)}}).$mount("#app")},"90c1":function(t,e,a){}});
//# sourceMappingURL=app.16a943aa.js.map